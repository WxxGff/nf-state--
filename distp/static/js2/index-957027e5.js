import{R as Y}from"../js1/__vendor-20f7aaa0.js";import{u as Z,c as J,_ as p,n as k}from"../js1/_@naturefw-81bcec32.js";import{S as tt,T as et,U as st,V as ot,W as nt,k as it,X as ut,Y as at}from"../js1/_element-plus-4b2a156e.js";import{d as x,e as rt,k as d,l as T,p as m,o as I,s as f,q as v,a as g,m as ct,t as A,Q as w,G as N,a3 as lt,i as U,r as L,O as F,j as pt,c as ht,u as V,F as ft,au as _t}from"../js1/_@vue-d07e5c3a.js";import{P as B,O as h}from"../js1/_@element-plus-fda99c40.js";import"../js1/_@popperjs-01a2ca38.js";const dt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const i of u.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerpolicy&&(u.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?u.credentials="include":n.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function e(n){if(n.ep)return;n.ep=!0;const u=s(n);fetch(n.href,u)}};dt();var q=(o,t)=>{const s=o.__vccOpts||o;for(const[e,n]of t)s[e]=n;return s};const mt=x({components:{ElContainer:tt,ElHeader:et,ElFooter:st,ElAside:ot,ElMain:nt,ElSwitch:it},setup(){const o={"inline-prompt":!0,"active-text":"\u591A","inactive-text":"\u5355","active-color":"#378FEB","inactive-color":"#EA9712"},t=rt(!0);return Z(),{myselect:(e,n)=>{console.log("select-\u5916\u9762",e,n)},isTabs:t,itemProps:o}}}),$t=g("div",{style:{float:"left"}},[v("\u5199\u7F51\u7AD9logo\u3001\u6807\u9898\u7B49"),g("h1",null,"nf-state \u8F7B\u91CF\u7EA7\u72B6\u6001\u7BA1\u7406")],-1),gt={style:{float:"right","min-width":"100px",height:"40px","padding-top":"3px"}},Et=g("div",{style:{float:"right","min-width":"600px",height:"60px"}},[v("\u7F51\u7AD9\u5BFC\u822A")],-1),vt=A("Footer");function At(o,t,s,e,n,u){const i=d("el-switch"),l=d("el-header"),a=d("nf-menu"),c=d("el-aside"),r=d("nf-router-view"),O=d("nf-router-view-tabs"),E=d("el-main"),j=d("el-container"),W=d("el-footer");return I(),T(j,null,{default:m(()=>[f(l,null,{default:m(()=>[v("\u5BFC\u822A"),$t,g("div",gt,[v("\u5199\u7F51\u7AD9logo\u3001\u6807\u9898\u7B49"),f(i,ct({modelValue:o.isTabs,"onUpdate:modelValue":t[0]||(t[0]=X=>o.isTabs=X)},o.itemProps),null,16,["modelValue"])]),Et]),_:1}),f(j,null,{default:m(()=>[f(c,{width:"230px"},{default:m(()=>[v("\u83DC\u5355 "),f(a,{onSelect:o.myselect},null,8,["onSelect"])]),_:1}),f(j,null,{default:m(()=>[f(E,null,{default:m(()=>[v("\u7F16\u8F91\u533A\u57DF  "),o.isTabs?v("v-if",!0):(I(),T(r,{key:0})),o.isTabs?(I(),T(O,{key:1})):v("v-if",!0)]),_:1})]),_:1})]),_:1}),f(W,null,{default:m(()=>[vt]),_:1})]),_:1})}var bt=q(mt,[["render",At],["__file","D:/nf/gitee-ts/nf-code/nf-rollup-state/src/App.vue"]]);const z=Symbol("__nf-state__"),C={},D={},G=C;function P(o,t,s){const e=s?.isLocal??!1,n=s?.level?s.level:1;if(!e){if(C[o])return C[o]}let u=null;if(w(t))u=t;else if(t.getters||t.actions)u=H(o,t,s);else{const l=t.state?t.state:t;u=Bt(o,l,s)}const i=n===1?u:N(u);return e?lt(o,i):C[o]=i,n===4?u:i}function Lt(o){const t=o.store;return Object.keys(t).forEach(s=>{const e=t[s],n=e.options?e.options:{isLocal:!1,isLog:!1,level:1};e.state||w(e)?D[s]=P(s,e,n):D[s]=P(s,{state:e},n)}),typeof o.init=="function"&&o.init(D),s=>{s.config.globalProperties.$state=C,s.provide(z,G)}}function kt(o){const t=U(z)??G;return t[o]?t[o]:(console.error("\u6CA1\u6709\u627E\u5230\u8FD9\u4E2A\u72B6\u6001\uFF1A",o),null)}function te(o){return U(o)}const _=L({});function b(o,t,s,e,n={},u){if(_[o]||(_[o]={log:[]}),t==="init")return;let i=u;if(!u){let r=3;switch(t){case"$state":r=5;break;case"$reset":r=3;break}const E=(new Error().stack??"").split(`
`);i=E.length>r?E[r]:E[E.length-1]}const l=w(s)?$({},s):s,a=w(e)?$({},e):e,c=w(n)?$({},n):n;_[o].log.push({time:new Date().valueOf(),kind:t,oldValue:l,newValue:a,subValue:c,callFun:i})}class y extends Array{constructor(t){super();let s=t;typeof t=="function"&&(s=t()),Array.isArray(s)?s.length>0&&this.push(...s):s&&this.push(s)}$reset(){if(this.$_value){this.length=0;const t=typeof this.$_value=="function"?this.$_value():this.$_value;this.push(...t)}}$patch(){}$toRaw(){const t=[];return F(this).forEach(e=>{t.push(e.$toRaw?e.$toRaw():e)}),t}set $state(t){this.length=0,Array.isArray(t)?this.push(...t):this.push(t)}$forEach(){}get $log(){return _[this.$id]?_[this.$id].log:[]}$clearLog(){_[this.$id]&&(_[this.$id].log.length=0)}pushA(...t){return this.unshift(...t)}pushAt(t,...s){this.splice(t,0,...s)}deleteA(){this.shift()}deleteAt(t,s){return this.splice(t,s)}deleteZ(){this.pop()}swap(t,s){const e=this[t];this[t]=this[s],this[s]=e}}function M(o,t){const s=t.$toRaw?t.$toRaw():F(t);return Object.keys(s).forEach(e=>{switch(typeof s[e]){case"object":Array.isArray(s[e])?(Array.isArray(o[e])?o[e].length=0:o[e]=new y,o[e].push(...s[e])):(o[e]||(o[e]={}),s[e]===null?o[e]=null:M(o[e],s[e]));break;case"bigint":case"boolean":case"number":case"string":o[e]=s[e];break}}),o}function $(o,t){const s=t.$toRaw?t.$toRaw():F(t);return Object.keys(s).forEach(e=>{switch(typeof s[e]){case"object":Array.isArray(s[e])?o[e]=new y(s[e]):(o[e]={},$(o[e],s[e]));break;case"bigint":case"boolean":case"number":case"string":o[e]=s[e];break}}),o}class R{constructor(t){if(typeof t=="function"){const s=t();Object.keys(s).forEach(e=>{const n=s[e];Array.isArray(n)?this[e]=new y(n):typeof n=="object"&&n!==null?this[e]=new R(n):this[e]=n})}else $(this,t);this.$isLog&&b(this.$id,"init",{},{})}$reset(){if(this){if(!this.$_value)return;const t=this.$_value,s=typeof t=="function"?t():$({},t);this.$isLog&&b(this.$id,"$reset",this,s),this.$state=s}}$patch(t){const s=typeof t=="function"?t(this):t;let e="";this.$isLog&&(e=this.$isLog?$({},this):""),M(this,s),this.$isLog&&b(this.$id,"$patch",e,this,s)}$toRaw(){const t={},s=F(this);return Object.keys(s).forEach(e=>{e!=="$id"&&e!=="$isLog"&&e!=="$_value"&&e!=="$log"&&(t[e]=s[e].$toRaw?s[e].$toRaw():s[e])}),t}set $state(t){let s="";this.$isLog&&(s=this.$isLog?$({},this):"");const e=Object.keys(this);Object.keys(t).forEach(n=>{if(this[n]){this[n].$toRaw?this[n].$state=t[n]:this[n]=t[n];const u=e.findIndex(i=>i===n);u>-1&&e.splice(u,1)}else this[n]=t[n]}),e.forEach(n=>{delete this[n]}),this.$isLog&&b(this.$id,"$state",s,this,t)}$forEach(t){if(typeof t=="function"){const s=F(this);Object.keys(s).forEach((e,n)=>{if(e!=="$_value"&&e!=="$id"&&e!=="$isLog"){const u=s[e];t(u,e,n)}})}}get $log(){return _[this.$id]?_[this.$id].log:[]}$clearLog(){_[this.$id]&&(_[this.$id].log.length=0)}}function H(o,t,s={}){let e=null,n=null;const u=typeof t.state=="function"?t.state():t.state;if(Array.isArray(u)){class a extends y{constructor(r){super(r)}get $isLog(){return!!s.isLog}get $id(){return o}}n=a,e=new a(t.state)}else{class a extends R{constructor(r){super(r)}get $isLog(){return!!s.isLog}get $_value(){return t.state}get $id(){return o}}n=a,e=new a(t.state)}const i=L(e),l=s.level?s.level:1;if(l===2){const a=i.$patch;n.prototype.$patch=function(r){a.call(i,r)};const c=i.$reset;n.prototype.$reset=function(r){c.call(i,r)},n.prototype.$statef=function(r){i.$state=r}}return typeof t.getters=="object"&&Object.keys(t.getters).forEach(a=>{n.prototype[a]=pt(()=>{let c="";i.$isLog&&(c=i.$isLog?$({},i):"");const r=t.getters[a].call(i,i);return i.$isLog&&b(i.$id,`getters-${l}-${a}`,c,i,{}),r})}),typeof t.actions=="object"&&Object.keys(t.actions).forEach(a=>{n.prototype[a]=async function(c){const O=new Error().stack.split(`
`);let E="";i.$isLog&&(E=i.$isLog?$({},i):""),l<4?await t.actions[a].call(i,c,i):await t.actions[a].call(this,c,this),i.$isLog&&b(i.$id,`actions-${l}-${a}`,E,i,c,O[2])}}),i}function Bt(o,t,s){let e=null;const n=typeof t=="function"?t():t;return Array.isArray(n)?e=new y(t):e=new R(t),e.$_value=()=>t,e.$id=()=>o,e.$isLog=()=>!!s.isLog,L(e)}const wt={state:{name:"\u53EA\u6709state\u7684\u72B6\u6001\uFF0C\u5BF9\u8C61"}},Ct={state:()=>({name:"\u53EA\u6709state\u7684\u72B6\u6001\uFF0C\u51FD\u6570"})},Ft={state:()=>({name:"\u5E26\u6709getter\u3001action \u7684\u72B6\u6001",age:18}),getters:{getterTest(){return this.name}},actions:{actionTest(){this.name="action \u4FEE\u6539\u4E86name"+new Date().valueOf()}}},yt=()=>new Promise(o=>{setTimeout(()=>{o({name:"\u5F02\u6B65\u7684\u65B9\u5F0F\u8BBE\u7F6Ename"})},500)}),Ot={state:()=>({name:"\u5E26\u6709getter\u3001action \u7684\u72B6\u6001",age:18}),actions:{actionTest(){this.name="action \u4FEE\u6539\u4E86name"+new Date().valueOf()},async yibu(){const o=await yt();this.name=o.name}},options:{isLocal:!1,isLog:!0,level:1}},K=H("stateRet",{state:()=>({name:"readonly \u7684\u72B6\u6001",age:18}),getters:{getterTest(){return this.name}},actions:{actionTest(){this.name="action \u4FEE\u6539\u4E86name"+new Date().valueOf()}}},{});setTimeout(()=>{K.name="\u5185\u90E8\u4FEE\u6539"+new Date().valueOf()},500);var Dt=Lt({store:{stateOnly:wt,stateOnlyFun:Ct,stateGA:Ft,stateRet:N(K),stateLog:Ot,user:{state:()=>({isLogin:!1,name:"jyk",age:19,info:{a1:"\u5BF9\u8C61\u5C5E\u6027",b:{b1:"\u7B2C\u4E09\u6210"}},arr:[{c:{c1:"\u6570\u7EC41"},d:{d1:"\u6570\u7EC42"}}],roles:["1","2"]}),actions:{test(){this.age++}}}},init(o){console.log("\u521D\u59CB\u5316",o)}});class Q{name;age;name2;constructor(t,s){this.name=t,this.name2="\u53EA\u8BFB\u7684",this.age=s}set $state(t){console.log("\u7236\u7C7B\u7684$id",this.$id),Object.assign(this,t)}}class It extends Array{constructor(t){super()}set $state(t){this.length=0,Array.isArray(t)?this.push(...t):this.push(t)}}function S(o,t,s){class e extends Q{constructor(l,a){super(l,a)}get $id(){return o}}const n=new e(t,s);return L(n)}const Rt=x({name:"state-home",setup(){const o=new Q("jyk",18),t=L(o),s=()=>{t.$state={name:"\u76F4\u63A5\u8D4B\u503C"}},e=new It,n=L(e),u=()=>{n.$state=[{name:"008"},{name:"009"}],console.log(n)},i=S("010","jyk0013",29);console.log(i),console.log("state3 - keys",Object.keys(i));for(const c in i)console.log(c,i[c]);const l=S("011","jyk0019",28);return console.log(l),console.log("state4 - keys",Object.keys(l)),{myclick:s,state:t,myclick2:u,state2:n,myclick3:()=>{i.$state={name:"\u76F4\u63A5\u8D4B\u503C111"},console.log(i),console.log(l)},state3:i}}}),jt=g("br",null,null,-1),Tt=A("\u8D4B\u503C"),Vt=g("br",null,null,-1),Pt=g("br",null,null,-1),St=A("\u8D4B\u503C"),xt=g("br",null,null,-1),Nt=g("br",null,null,-1),Ut=A("\u8D4B\u503C"),qt=g("br",null,null,-1);function zt(o,t,s,e,n,u){const i=d("el-button");return I(),ht(ft,null,[A(" nf-state \u8F7B\u91CF\u7EA7\u72B6\u6001\u7BA1\u7406 "+V(o.state),1),jt,f(i,{onClick:o.myclick},{default:m(()=>[Tt]),_:1},8,["onClick"]),Vt,A(" "+V(o.state2),1),Pt,f(i,{onClick:o.myclick2},{default:m(()=>[St]),_:1},8,["onClick"]),xt,A(" "+V(o.state3),1),Nt,f(i,{onClick:o.myclick3},{default:m(()=>[Ut]),_:1},8,["onClick"]),qt],64)}var Gt=q(Rt,[["render",zt],["__file","D:/nf/gitee-ts/nf-code/nf-rollup-state/src/views/home.vue"]]);const Mt=document.location.host.includes(".gitee.io")?"/nf-rollup-state":"";var Ht=J({baseUrl:Mt,home:Gt,menus:[{menuId:"1",title:"\u5168\u5C40\u72B6\u6001",naviId:"0",path:"global",icon:B,childrens:[{menuId:"1010",title:"\u7EAFstate",path:"state",icon:h,component:()=>p(()=>import("../js1/10-state-e712c416.js"),["static/js1/10-state-e712c416.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])},{menuId:"1020",title:"\u4E00\u822C\u7684\u72B6\u6001",path:"standard",icon:h,component:()=>p(()=>import("../js1/20-standard-780fe4ea.js"),["static/js1/20-standard-780fe4ea.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])},{menuId:"1030",title:"reactive",path:"reactive",icon:h,component:()=>p(()=>import("../js1/30-reactive-0efa132f.js"),["static/js1/30-reactive-0efa132f.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])},{menuId:"1040",title:"\u65E5\u5FD7",path:"log",icon:h,component:()=>p(()=>import("../js1/40-log-b3f6bf82.js"),["static/js1/40-log-b3f6bf82.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/test-state-41613e91.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])},{menuId:"1050",title:"\u7EC4\u4EF6\u91CC\u5B9A\u4E49",path:"comp-reg",icon:h,component:()=>p(()=>import("../js1/50-comp-a072d2b6.js"),["static/js1/50-comp-a072d2b6.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/test-state-41613e91.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])}]},{menuId:"2000",title:"\u5C40\u90E8\u72B6\u6001",naviId:"0",path:"loacl",icon:B,childrens:[{menuId:"2010",title:"\u7236\u5B50\u7EC4\u4EF6",path:"parent-son",icon:h,component:()=>p(()=>import("../js1/10-parent-fb00a3dc.js"),["static/js1/10-parent-fb00a3dc.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])}]},{menuId:"5000",title:"\u57FA\u7C7B",naviId:"0",path:"class",icon:B,childrens:[{menuId:"5010",title:"\u5BF9\u8C61",path:"object",icon:h,component:()=>p(()=>import("../js1/10-object-35cca69e.js"),["static/js1/10-object-35cca69e.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])},{menuId:"5020",title:"\u6570\u7EC4",path:"array",icon:h,component:()=>p(()=>import("../js1/20-array-016051ac.js"),["static/js1/20-array-016051ac.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])}]},{menuId:"6000",title:"\u5B89\u5168\u7EA7\u522B",naviId:"0",path:"level",icon:B,childrens:[{menuId:"6010",title:"\u5BBD\u677E",path:"level1",icon:h,component:()=>p(()=>import("../js1/10-level1-f469ae68.js"),["static/js1/10-level1-f469ae68.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])},{menuId:"6020",title:"\u4E00\u822C",path:"level2",icon:h,component:()=>p(()=>import("../js1/20-level2-e296fd9f.js"),["static/js1/20-level2-e296fd9f.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])},{menuId:"6030",title:"\u4E25\u683C",path:"level3",icon:h,component:()=>p(()=>import("../js1/30-level3-ecc3d3e0.js"),["static/js1/30-level3-ecc3d3e0.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])},{menuId:"6040",title:"\u8D85\u4E25",path:"level4",icon:h,component:()=>p(()=>import("../js1/40-level4-272cb2bc.js"),["static/js1/40-level4-272cb2bc.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])}]},{menuId:"8000",title:"pinia",naviId:"0",path:"pinia",icon:B,childrens:[{menuId:"8010",title:"\u8BD5\u4E00\u8BD5",path:"test",icon:h,component:()=>p(()=>import("../js1/pinia-d9f5f152.js"),["static/js1/pinia-d9f5f152.js","static/js1/__vendor-20f7aaa0.js","static/js1/_@vue-d07e5c3a.js","static/js1/_@naturefw-81bcec32.js","static/js1/_element-plus-4b2a156e.js","static/js1/_@element-plus-fda99c40.js","static/js1/_@popperjs-01a2ca38.js"])}]}]});const Kt=Y();_t(bt).use(Ht).use(ut,{locale:at,size:"small"}).use(k).use(Dt).use(Kt).mount("#app");export{R as B,q as _,te as a,y as b,P as d,kt as u};
//# sourceMappingURL=index-957027e5.js.map
